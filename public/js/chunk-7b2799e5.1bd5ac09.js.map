{"version":3,"sources":["webpack:///./src/views/login/login.vue?3dca","webpack:///./src/views/login/login.vue?e8e9","webpack:///src/views/login/login.vue","webpack:///./src/views/login/login.vue?b0ba","webpack:///./src/views/login/login.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_4c97c308_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_4c97c308_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","localUser","attrs","src","avator","_e","on","click","goSignUp","_v","placeholder","domProps","input","$event","target","composing","userSignInName","type","userSignInPassword","signIn","goSignIn","userSignUpName","userSignUpPassword","ref","change","getAvatorUrl","userAvatorUrl","width","signUp","staticRenderFns","loginvue_type_script_lang_js_","data","isShowLogin","isLoading","mounted","Object","storage","methods","_this","login","password","then","res","user","$store","commit","$router","push","$route","query","redirect","catch","err","console","log","e","file","files","filePath","$refs","fileInput","typeIdx","lastIndexOf","fileType","substring","length","toLowerCase","indexOf","$message","message","fileSize","size","reader","FileReader","that","readAsDataURL","onload","result","_this2","login_loginvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-7b2799e5.1bd5ac09.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=4c97c308&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=4c97c308&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"page-container\"},[_c('div',{staticClass:\"main-container\"},[(_vm.isShowLogin)?_c('div',{staticClass:\"login-container\"},[(_vm.localUser.avator)?_c('img',{staticClass:\"avator-image\",attrs:{\"src\":_vm.localUser.avator}}):_vm._e(),_c('button',{staticClass:\"from-btn\",on:{\"click\":_vm.goSignUp}},[_vm._v(\"Go Sign up\")]),_c('div',{staticClass:\"from-item\"},[_c('span',[_vm._v(\"name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userSignInName),expression:\"userSignInName\"}],attrs:{\"placeholder\":\"enter your account\"},domProps:{\"value\":(_vm.userSignInName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.userSignInName=$event.target.value}}})]),_c('div',{staticClass:\"from-item\"},[_c('span',[_vm._v(\"password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userSignInPassword),expression:\"userSignInPassword\"}],attrs:{\"placeholder\":\"enter your account\",\"type\":\"password\"},domProps:{\"value\":(_vm.userSignInPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.userSignInPassword=$event.target.value}}})]),_c('div',{staticClass:\"from-item from-btn\"},[_c('button',{staticClass:\"from-btn\",on:{\"click\":_vm.signIn}},[_vm._v(\"Sign in\")])])]):_c('div',{staticClass:\"sign-up-container\"},[_c('button',{staticClass:\"from-btn\",on:{\"click\":_vm.goSignIn}},[_vm._v(\"Go Sign in\")]),_c('div',{staticClass:\"from-item\"},[_c('span',[_vm._v(\"name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userSignUpName),expression:\"userSignUpName\"}],attrs:{\"placeholder\":\"enter your account\"},domProps:{\"value\":(_vm.userSignUpName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.userSignUpName=$event.target.value}}})]),_c('div',{staticClass:\"from-item\"},[_c('span',[_vm._v(\"password\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userSignUpPassword),expression:\"userSignUpPassword\"}],attrs:{\"placeholder\":\"enter your nick name\",\"type\":\"password\"},domProps:{\"value\":(_vm.userSignUpPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.userSignUpPassword=$event.target.value}}})]),_c('div',{staticClass:\"from-item\"},[_c('span',[_vm._v(\"avatar\")]),_c('input',{ref:\"fileInput\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.getAvatorUrl}}),_c('img',{attrs:{\"src\":_vm.userAvatorUrl,\"width\":\"50px\"}})]),_c('div',{staticClass:\"from-item\"},[_c('button',{staticClass:\"from-btn\",on:{\"click\":_vm.signUp}},[_vm._v(\"Sign up\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-container\" v-loading=\"isLoading\">\n    <div class=\"main-container\">\n      <div v-if=\"isShowLogin\" class=\"login-container\">\n        <img class=\"avator-image\" v-if=\"localUser.avator\" :src=\"localUser.avator\">\n        <button @click=\"goSignUp\" class=\"from-btn\">Go Sign up</button>\n        <div class=\"from-item\">\n          <span>name</span>\n          <input placeholder=\"enter your account\" v-model=\"userSignInName\">\n        </div>\n        <div class=\"from-item\">\n          <span>password</span>\n          <input placeholder=\"enter your account\" type=\"password\" v-model=\"userSignInPassword\">\n        </div>\n        <div class=\"from-item from-btn\">\n          <button @click=\"signIn\" class=\"from-btn\">Sign in</button>\n        </div>\n      </div>\n      <div v-else class=\"sign-up-container\">\n        <button class=\"from-btn\" @click=\"goSignIn\">Go Sign in</button>\n        <div class=\"from-item\">\n          <span>name</span>\n          <input placeholder=\"enter your account\" v-model=\"userSignUpName\">\n        </div>\n        <div class=\"from-item\">\n          <span>password</span>\n          <input placeholder=\"enter your nick name\" type=\"password\" v-model=\"userSignUpPassword\">\n        </div>\n        <div class=\"from-item\">\n          <span>avatar</span>\n          <input type=\"file\" @change=\"getAvatorUrl\" ref=\"fileInput\">\n          <img :src=\"userAvatorUrl\" width=\"50px\">\n        </div>\n        <div class=\"from-item\">\n          <button class=\"from-btn\" @click=\"signUp\">Sign up</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getItem, setItem } from \"@/utils/storage\";\nimport { signInApi, signUpApi } from \"@/api/login\";\nexport default {\n  data() {\n    return {\n      isShowLogin: true,\n      userSignInName: \"\",\n      userSignInPassword: \"\",\n      userSignUpName: \"\",\n      userSignUpPassword: \"\",\n      userAvatorUrl: \"\",\n      isLoading: false,\n      localUser: {}\n    };\n  },\n  mounted() {\n    this.localUser = getItem(\"userInfo\", true) || {};\n    this.userSignInName = this.localUser.name;\n  },\n  methods: {\n    signIn() {\n      if (!this.userSignInName || !this.userSignInPassword) {\n        return;\n      }\n      this.isLoading = true;\n      signInApi({\n        name: this.userSignInName,\n        password: this.userSignInPassword\n      })\n        .then(res => {\n          setItem(\"userInfo\", res.user, true);\n          this.$store.commit(\"SET_USER_INFO\", res.user);\n          this.$router.push(this.$route.query.redirect || \"home\");\n          this.isLoading = false;\n        })\n        .catch(err => {\n          console.log(err);\n          this.isLoading = false;\n        });\n    },\n    goSignUp() {\n      this.isShowLogin = false;\n    },\n    goSignIn() {\n      this.isShowLogin = true;\n    },\n    getAvatorUrl(e) {\n      const file = e.target.files[0];\n      const filePath = this.$refs.fileInput.value;\n      if (file) {\n        const typeIdx = filePath.lastIndexOf(\".\");\n        const fileType =\n          typeIdx > -1\n            ? filePath.substring(typeIdx + 1, filePath.length).toLowerCase()\n            : \"\";\n        //判断上传的附件是否为图片\n        if ([\"jpg\", \"jpeg\", \"bmp\", \"png\", \"gif\"].indexOf(fileType) < 0) {\n          this.$message({\n            message: \"请选择图片格式！\",\n            type: \"error\"\n          });\n          this.$refs.fileInput.value = \"\";\n          return;\n        }\n        // 限制上传图片大小\n        const fileSize = file.size / 1024;\n        if (fileSize > 1024) {\n          this.$message({\n            message: \"图片大小不能超过1MB！\",\n            type: \"error\"\n          });\n          this.$refs.fileInput.value = \"\";\n          return;\n        }\n\n        // this.file = file;\n        const reader = new FileReader();\n        const that = this;\n        reader.readAsDataURL(file);\n        reader.onload = function() {\n          that.$refs.fileInput.value = \"\";\n          that.userAvatorUrl = reader.result;\n        };\n      }\n      this.$refs.fileInput.value = \"\";\n    },\n    signUp() {\n      if (!this.userSignUpName || !this.userSignUpPassword) {\n        return;\n      }\n      this.isLoading = true;\n      signUpApi({\n        name: this.userSignUpName,\n        password: this.userSignUpPassword,\n        avator: this.userAvatorUrl\n      })\n        .then(res => {\n          console.log(res);\n          this.isLoading = false;\n        })\n        .catch(err => {\n          console.log(err);\n          this.isLoading = false;\n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$images: \"../../assets/images/\";\n.page-container {\n  // height: 100%;\n  // background: url($images+\"login_bg.png\") no-repeat;\n  // background-size: cover;\n  // filter: blur(5px);\n  .login-container,\n  .sign-up-container {\n    max-width: 500px;\n    margin: 200px auto 0px;\n    padding: 20px 30px;\n    background-color: #fff;\n    display: flex;\n    flex-direction: column;\n    .from-item {\n      padding: 15px 0px;\n      button {\n        padding: 2px 12px;\n        margin-right: 12px;\n      }\n      span {\n        margin-right: 12px;\n      }\n    }\n  }\n\n  .avator-image {\n    width: 100px;\n    height: 100px;\n    background-color: #fff;\n    border-radius: 50%;\n    align-self: center;\n    margin-top: -70px;\n    margin-bottom: 20px;\n  }\n}\n</style>\n\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=4c97c308&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=4c97c308&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c97c308\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}